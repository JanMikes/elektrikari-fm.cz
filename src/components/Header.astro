---
import { Menu, X } from 'lucide-astro';
import { menuItems } from '../data/menuItems';

const currentPath = Astro.url.pathname;
---

<header class="bg-white shadow-md fixed top-0 left-0 right-0 z-50">
  <nav class="container-custom py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="/" class="flex items-center">
        <picture>
          <source srcset="/images/elektrikari-fm-logo.avif" type="image/avif" />
          <source srcset="/images/elektrikari-fm-logo.webp" type="image/webp" />
          <img
            src="/images/elektrikari-fm-logo.png"
            alt="Elektrikáři Frýdek-Místek"
            class="h-12 md:h-14 w-auto"
            width="300"
            height="82"
          />
        </picture>
      </a>

      <!-- Mobile menu button -->
      <button
        id="mobile-menu-button"
        class="lg:hidden p-2 text-gray-700 hover:text-primary-700 transition-colors"
        aria-label="Toggle menu"
      >
        <Menu class="h-6 w-6" id="menu-icon" />
        <X class="h-6 w-6 hidden" id="close-icon" />
      </button>

      <!-- Desktop Navigation -->
      <ul class="hidden lg:flex items-center space-x-1">
        {menuItems.map((item) => (
          <li>
            <a
              href={item.url}
              class:list={[
                "px-4 py-2 rounded-lg font-medium text-lg transition-all duration-200",
                item.title === "Kontakt"
                  ? currentPath === item.url
                    ? "bg-gradient-to-r from-primary-700 to-primary-600 text-white shadow-md"
                    : "bg-gradient-to-r from-primary-600 to-blue-500 text-white hover:shadow-lg hover:scale-105"
                  : currentPath === item.url
                  ? "bg-primary-50 text-primary-700 border-2 border-primary-600"
                  : "text-gray-700 hover:bg-primary-50 hover:text-primary-700"
              ]}
            >
              {item.title}
            </a>
          </li>
        ))}
      </ul>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="hidden lg:hidden mt-4 pt-4 border-t border-gray-200">
      <ul class="space-y-2">
        {menuItems.map((item) => (
          <li>
            <a
              href={item.url}
              class:list={[
                "block px-4 py-3 rounded-lg font-medium text-lg transition-all duration-200",
                item.title === "Kontakt"
                  ? currentPath === item.url
                    ? "bg-gradient-to-r from-primary-700 to-primary-600 text-white shadow-md"
                    : "bg-gradient-to-r from-primary-600 to-blue-500 text-white hover:shadow-lg"
                  : currentPath === item.url
                  ? "bg-primary-50 text-primary-700 border-2 border-primary-600"
                  : "text-gray-700 hover:bg-primary-50 hover:text-primary-700"
              ]}
            >
              {item.title}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </nav>
</header>

<!-- Spacer to prevent content from being hidden under fixed header -->
<div class="h-20 md:h-22"></div>

<script>
  const button = document.getElementById('mobile-menu-button');
  const menu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');

  button?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
    menuIcon?.classList.toggle('hidden');
    closeIcon?.classList.toggle('hidden');
  });
</script>
